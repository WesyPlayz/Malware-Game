using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class EnemyHandler : MonoBehaviour
{
    // Object State Variables:
    public GameObject damaged_Particle;
    private Obj_State obj_Data;

    // Initiate State:
    void Start()
    {
        obj_Data = GetComponent<Obj_State>();
    }

    // Health System
    void Update()
    {
        if (obj_Data.Health == 0)
            Destroy(gameObject);
    }
    void OnCollisionEnter2D(Collision2D sender)
    {
        if (sender.gameObject.layer == LayerMask.NameToLayer("Projectile"))
        {
            Obj_State projectile_Data = sender.gameObject.GetComponent<Obj_State>();
            damaged_Particle.GetComponent<ParticleSystem>().Play();
            obj_Data.Health = Mathf.Max(obj_Data.Health - projectile_Data.Damage, 0);
            Destroy(sender.gameObject);
        }
    }
}