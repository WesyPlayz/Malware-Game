using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class InteractionZone : MonoBehaviour
{
    // Object State Variables:
    public GameObject User;

    private Obj_State obj_Data;

    // Initiate State:
    void Start()
    {
        obj_Data = GetComponent<Obj_State>();
    }

    // Detection System:
    void Update()
    {
        // finds closest enemy
        Collider2D[] entities = Physics2D.OverlapCircleAll(transform.position, obj_Data.Reach / 2);

        GameObject closest_Entity = null;
        float closest_Distance = Mathf.Infinity;

        foreach (Collider2D entity in entities)
        {
            GameObject entity_Obj = entity.gameObject;
            if (entity_Obj.layer == LayerMask.NameToLayer("Entity"))
            {
                float distance = Vector2.Distance(User.transform.position, entity_Obj.transform.position);
                if (distance < closest_Distance)
                {
                    closest_Entity = entity_Obj;
                    closest_Distance = distance;
                }
            }
            else if (entity_Obj.layer == LayerMask.NameToLayer("Items"))
            {
                // for items to be picked up.
            }
        }
        obj_Data.collided_Entity = closest_Entity;
    }
}
